<div class="container">
<!-- body start-->
    <div class="row"> <div class="col s10"></div></div>   

    <!-- action bar -->
    <!-- <div class="row">
        <div class="col s12">
        </div>
    </div> -->
    
    <div class="row">
        <wizard on-finish="createSandBox()" template="app/components/directives/wizard/wizard.html"> 
            
            <!-- step infos personnes -->
            <wz-step title="{{'civilSection.label.userSignupCivilSection' | translate }}" template="app/components/directives/wizard/step.html">
                <div class="row"></div>
                <form novalidate class="col s12" name="userCivilSection">
                    
                    <div class="row">
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                        <div class="input-field col m1 s6">
                            <label>{{'civilSection.label.userGender' | translate }} <span class="red-text text-lighten-1">*</span></label>
                        </div>
                        <div class="input-field col m5 s6">
                            <input name="signup.gender" class="with-gap" type="radio" id="userGenderF" value="{{'civilSection.label.userGenderF' | translate }}"
                                       ng-model="signup.gender" required/>
                            <label for="userGenderF">{{'civilSection.label.userGenderF' | translate }}</label>

                            <input name="signup.gender" class="with-gap" type="radio" id="userGenderM" value="{{'civilSection.label.userGenderM' | translate }}"
                               ng-model="signup.gender" required/>
                            <label for="userGenderM">{{'civilSection.label.userGenderM' | translate }}</label>
                        </div>
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                    </div>
                    
                    <div class="row">
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                        <div class="input-field col m3 s6">
                          <input placeholder="{{'civilSection.label.userFirstname' | translate }}" ng-model="signup.firstname" id="userFirstname" type="text" class="validate" required>
                          <label for="userFirstname">{{'civilSection.label.userFirstname' | translate }} <span class="red-text text-lighten-1">*</span></label>
                        </div>
                        <div class="input-field col m3 s6">
                          <input placeholder="{{'civilSection.label.userName' | translate }}" ng-model="signup.name" id="userName" type="text" class="validate" required>
                          <label for="userName">{{'civilSection.label.userName' | translate }} <span class="red-text text-lighten-1">*</span></label>
                        </div>
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                    </div>
                    
                     <div class="row">
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                        <div class="input-field col m4 s6">
                            <input type="text" id="userNationality" class="form-control" ng-autocomplete ng-model="signup.nationality" details="detailsCountry" options="optionsCountry" placeholder="" />
                            <label for="userNationality">{{'civilSection.label.userNationality' | translate }}</label>
                        </div>
                        <div class="input-field col m2 s6">
                            <div class="input-field col s12">
                                <label for="userBirthDate">{{'civilSection.label.userBirthDate' | translate }} <span class="red-text text-lighten-1">*</span></label>
                            </div>
                            <div class="input-field col s12">
                                <input placeholder="{{'userLabels.userBirthDate' | translate }}" ng-model="signup.birthdate" id="userBirthDate" type="date" class="validate" required>
                            </div>
                        </div>
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                    </div>
                    
                    <div class="row">
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                        <div class="input-field col m2 s4">
                            <i class="material-icons prefix">mail</i>
                            <label for="playerMail">{{'civilSection.label.userEMail' | translate }}</label>
                        </div>
                        <div class="input-field col m4 s8">
                            {{signup.contact.email}}                            
                        </div>
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                    </div>
                    
                    <div class="row">
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                        <div class="input-field col m6 s12">
                            <label>{{'civilSection.label.userPhoneNumber' | translate }} <span class="red-text text-lighten-1">*</span></label>
                        </div>
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                    </div>
                    
                    <div class="row">
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                        <div class="input-field col m2 s4">
                            <i class="material-icons prefix">phone</i>
                            <label for="userPhoneHome">{{'civilSection.label.userPhoneHome' | translate }}</label>
                        </div>
                        <div class="input-field col m4 s8">
                            <input id="userPhoneHome" type="text" ui-mask="{{'commons.format.phone.pattern' | translate }}" 
                                   class="validate" min="0" ng-model="signup.contact.home">
                        </div>
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                    </div>
                    <div class="row">
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                        <div class="input-field col m2 s4">
                            <i class="material-icons prefix">phone</i>
                            <label for="userPhoneOffice">{{'civilSection.label.userPhoneOffice' | translate }}</label>
                        </div>
                        <div class="input-field col m4 s8">
                            <input id="userPhoneOffice" type="text" ui-mask="{{'commons.format.phone.pattern' | translate }}" 
                                   class="validate" min="0" ng-model="signup.contact.office">
                        </div>
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                    </div>
                     <div class="row">
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                        <div class="input-field col m2 s4">
                            <i class="material-icons prefix">smartphone</i>
                            <label for="userCellPhone">{{'civilSection.label.userCellPhone' | translate }}</label>
                        </div>
                        <div class="input-field col m4 s8">
                            <input id="userCellPhone" type="text" ui-mask="{{'commons.format.phone.pattern' | translate }}"
                                   class="validate" min="0" ng-model="signup.contact.cellphone">
                        </div>
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                    </div>
                    <!-- actions buttons -->
                    <div class="row">&nbsp;</div>
                    <div class="row">
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                        <div class="col m6 s12 center">
                            <a ng-click="openCancelModal()" class="btn red lighteen-1 white-text" >{{'commons.buttons.cancel' | translate }}</a>&nbsp;
                            <button class="btn white-text green darken-1" type="submit" ng-click="validateUserCivilSection()" name="next">{{'commons.buttons.next' | translate }}</button>
                        </div>
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                    </div>
                </form>
            </wz-step>
            
            
            <!-- step choix du sport -->
            <wz-step title="{{'sportSection.label.userSignupSportSection' | translate }}" template="app/components/directives/wizard/step.html">
                <div class="row"></div>
                <form novalidate class="col s12" name="userSportSection">
                    <div class="row">
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                        <div class="col m6 s12"><label>{{'sportSection.label.userSportChoice' | translate }}</label></div>
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                    </div>
                    <div class="row">
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                        <div class="col m6 s12">
                            <div class="col m3" ng-repeat="activity in activities">
                                <img  src="assets/images/activity/{{activity.code}}.jpg"/><br/>
                                <input name="signup.activity" class="with-gap" type="radio" id="activity.{{activity._id}}" value="{{activity._id}}" placeholder="{{activity.label | translate }}"
                                       ng-model="signup.activity" required ng-disabled="{{activity.enable==false}}"/>
                                <label for="activity.{{activity._id}}">{{activity.label | translate }}</label>
                            </div>
                        </div>
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                    </div>
                    
                    
                    <!-- actions buttons -->
                    <div class="row">&nbsp;</div>
                    <div class="row">
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                        <div class="col m6 s12 center">
                            <a ng-click="openCancelModal()" class="btn red lighteen-1 white-text">{{'commons.buttons.cancel' | translate }}</a>&nbsp;
                            <button class="btn white-text blue-grey darken-3" wz-previous type="submit" name="previous">{{'commons.buttons.previous' | translate }}</button>&nbsp;
                            <button class="btn white-text green darken-1" type="submit" ng-click="validateSportSection()" name="next">{{'commons.buttons.next' | translate }}</button>
                        </div>
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                    </div>
                </form>
            </wz-step>
            
             <!-- step choix du club -->
            <wz-step title="{{'structureSection.label.userSignupStructureSection' | translate }}" template="app/components/directives/wizard/step.html">
                <div class="row"></div>
                <form novalidate class="col s12" name="userStructureSection">
                    <div class="row">
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                        <div class="input-field col s3">
                            <label for="userStructure">{{'structureSection.label.userStructureCity' | translate }} <span class="red-text text-lighten-1">*</span></label>
                       </div>
                        <div class="input-field col s3">
                            <input type="text" id="userStructureCity" ng-autocomplete ng-model="structureCity" details="signup.detailsStructureCity" placeholder="" ng-change="changeCityName();" ng-blur="resetStructure();" />
                            <label for="userStructureCity">{{'structureSection.label.userStructureCity' | translate }}</label>
                        </div>
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                    </div>
                    
                    <div class="row">
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                        <div class="input-field col s3">
                            <label for="userStructure">{{'structureSection.label.userStructureName' | translate }} <span class="red-text text-lighten-1">*</span></label>
                       </div>
                        <div class="input-field col s3">
                            <select name="userStructureSelect" ng-model="structure" id="userStructureSelect" class="browser-default blue-grey-text text-darken-1" ng-focus="loadStructures()"
                            	ng-options="struct.labelAddress as (struct.label + struct.address) for struct in valuesStructures | orderBy:'label' track by struct._id" ng-focus="resetStructure();" ng-change="applyChangeStructure()" ng-blur="applyChangeStructure()">
                            </select>
                            <input type="hidden" ng-model="structure.referencialId" value="-1" />
                        </div>
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                    </div>
                    
                    
                     <!-- actions buttons -->
                    <div class="row">&nbsp;</div>
                    <div class="row">
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                        <div class="col m6 s12 center">
                            <a ng-click="openCancelModal()" class="btn red lighteen-1 white-text">{{'commons.buttons.cancel' | translate }}</a>&nbsp;
                            <button class="btn white-text blue-grey darken-3" wz-previous type="submit" name="previous">{{'commons.buttons.previous' | translate }}</button>&nbsp;
                            <button class="btn white-text green darken-1" type="submit" ng-click="validateStructureSection()" name="next">{{'commons.buttons.next' | translate }}</button>
                        </div>
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                    </div>
                </form>
            </wz-step>
            
            
            <!-- step Résumé -->
            <wz-step title="{{'sumupSection.label.userSignupSumup' | translate }}" template="app/components/directives/wizard/step.html">
                <div class="row"></div>
                <form class="col s12" name="userSumup">
                    <div class="row">
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                        <div class="input-field col s1"></div>
                        <div class="input-field col s5">
                            {{'' + signup.gender + '' | translate}} {{signup.name}} {{signup.firstname}}<br>
                            {{signup.contact.email}}<br>
                            <span ng-hide="signup.contact.home===null || angular.isUndefined(signup.contact.home)">{{'civilSection.label.userPhoneHome' | translate}} : {{signup.contact.home}}<br></span> 
                            <span ng-hide="signup.contact.office===null || angular.isUndefined(signup.contact.office)">{{'civilSection.label.userPhoneOffice' | translate}} : {{signup.contact.office}}<br></span>
                            <span ng-hide="signup.contact.cellphone===null || angular.isUndefined(signup.contact.cellphone)">{{'civilSection.label.userCellPhone' | translate}} : {{signup.contact.cellphone}}<br></span>
                       </div>
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                    </div>
                    <div class="row">
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                        <div class="input-field col s1">
                            <img  src="assets/images/activity/{{signup.activity}}.jpg"/><br/>
                       </div>
                        <div class="input-field col s5">
                        	<div ng-repeat="data in structuresResult" ng-show="data._id==structure.referencialId">
							     {{data.label}}<br>
							     {{data.address.place}}<br>
							     {{data.address.zipcode}} {{data.address.city}}
							</div> 
                        </div>
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                    </div>
                    
                    
                    <!-- actions buttons -->
                    <div class="row">&nbsp;</div>
                    <div class="row">
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                        <div class="col m6 s12 center-align">
                            <a ng-click="openCancelModal()" class="btn red lighteen-1 white-text">{{'commons.buttons.cancel' | translate }}</a>&nbsp;
                            <button class="btn white-text blue-grey darken-3" wz-previous type="submit" name="previous">{{'commons.buttons.previous' | translate }}</button>&nbsp;
                            <a wz-next class="btn white-text green darken-1">{{'commons.buttons.validate' | translate }}</a>
                        </div>
                        <div class="col m3 hide-on-med-and-down">&nbsp;</div>
                    </div>
                </form>
            </wz-step>
         </wizard>
    </div>

   <!-- Modal Cancel SignUp -->
<div id="modalCancel" class="modal">
	<div class="modal-header center-align ">
        <h5>
            <span class="fa fa-sign-in"></span>
            <span translate="modalSignupCancel.title"></span>
        </h5>
    </div>
    <div class="modal-content grey lighten-3 ">
		<div class="row">
			<div class="col s12">
			{{'modalSignupCancel.question' | translate}}
			</div>
		</div>
	</div>
	<div class="modal-footer">
		<a href="" ng-click="cancelSignup()"   class="modal-action modal-close waves-effect waves-red btn green darken-1">{{'modalSignupCancel.button.yes' | translate}}</a>&nbsp; 
        <a href="" ng-click="closeCancelModal()" class="modal-action modal-close waves-effect waves-red btn red">{{'modalSignupCancel.button.no' | translate}}</a>
	</div>
</div>
<!-- body end-->
</div>